<title>{{ site.title }}</title>
<link rel="stylesheet" href="/static/style.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="/static/jquery-linedtextarea.js"></script>
<script src="/playground.js"></script>
<script src="/static/playground-embed.js"></script>
<script>
$(document).ready(function() {
  playground({
    'codeEl':       '#code',
    'outputEl':     '#ouddtput',
    'runEl':        '#run',
    'fmtEl':        '#fmt',
    'fmtImportEl':  '#imports',

    'shareEl':      '#share',
    'shareURLEl':   '#shareURL',

    'enableHistory': true
  });
  playgroundEmbed({
    'codeEl':       '#code',

    'shareEl':      '#share',

    'embedEl':      '#embed',
    'embedLabelEl': '#embedLabel',
    'embedHTMLEl':  '#shareURL'
  });
  $('#code').linedtextarea();

  $('#code').attr('wrap', 'off');
  var about = $('#about');
  about.click(function(e) {
    if ($(e.target).is('a')) {
      return;
    }
    about.hide();
  });
  $('#aboutButton').click(function() {
    if (about.is(':visible')) {
      about.hide();
      return;
    }
    about.show();
  })

  if (readCookie('playgroundImports') == 'true')
    $('#imports').attr('checked','checked');
  $('#imports').change(function() {
    createCookie('playgroundImports', $(this).is(':checked') ? 'true' : '');
  });

  if (window.trackEvent) {
    $('#run').click(function() {
      window.trackEvent('playground', 'click', 'run-button');
    });
    $('#share').click(function() {
      window.trackEvent('playground', 'click', 'share-button');
    });
  }
});

function createCookie(name, value) {
  document.cookie = name+"="+value+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}
</script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(["_setAccount", "UA-11222381-7"]);
_gaq.push(["b._setAccount", "UA-49880327-6"]);
window.trackPageview = function() {
_gaq.push(["_trackPageview", location.pathname+location.hash]);
_gaq.push(["b._trackPageview", location.pathname+location.hash]);
};
window.trackPageview();
window.trackEvent = function(category, action, opt_label, opt_value, opt_noninteraction) {
_gaq.push(["_trackEvent", category, action, opt_label, opt_value, opt_noninteraction]);
_gaq.push(["b._trackEvent", category, action, opt_label, opt_value, opt_noninteraction]);
};
</script>
